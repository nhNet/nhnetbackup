var g=function(param){return document.querySelector(param)},
gA=function(param){return document.querySelectorAll(param)};
if(!localStorage['afkFactor']){
    localStorage['afkFactor']='5';
}else{
    g('.start').innerHTML='Continue Adventure';
}
if(!localStorage['myGold']){
    localStorage['myGold']='0';
}
if(!localStorage['myAP']){
    localStorage['myAP']='0';
}
g('.myGold').innerHTML=(Math.floor((Number(localStorage['myGold'])* 100)) / 100).toString() +'K';
g('.myAP').innerHTML=(Math.floor((Number(localStorage['myAP'])* 100)) / 100).toString() +'K';
var startTime, endTime,currentCollected=0;
function start() {
  startTime = new Date();
  if(localStorage['seconds']){
    startTime.setSeconds(startTime.getSeconds() - parseInt(localStorage['seconds']));
  }
};
function update(){
    endTime = new Date();
    var timeDiff = endTime - startTime; //in ms
    // strip the ms
    timeDiff /= 1000;
    // get seconds 
    var seconds = Math.round(timeDiff);
    var timeElapsed = (new Date(seconds * 1000)).toISOString().substr(11, 8);
    g('.timeElapsed').innerHTML='Time elapsed: '+timeElapsed;
    localStorage['seconds']=seconds.toString();
    if(!g('.exactAmounts').checked){
        g('.goldCount').innerHTML=(Math.floor((parseInt(localStorage['afkFactor'])*seconds)/1000)).toString()+'K';
        g('.apCount').innerHTML=(Math.floor((parseInt(localStorage['afkFactor'])*seconds)/1000)).toString()+'K';
    }else{
        g('.goldCount').innerHTML=((parseInt(localStorage['afkFactor'])*seconds)/1000).toString()+'K';
        g('.apCount').innerHTML=((parseInt(localStorage['afkFactor'])*seconds)/1000).toString()+'K';
    }
    currentCollected=((parseInt(localStorage['afkFactor'])*seconds)/1000)
    g('.myGold').innerHTML=(Math.floor((Number(localStorage['myGold'])* 100)) / 100).toString() +'K';
    g('.myAP').innerHTML=(Math.floor((Number(localStorage['myAP'])* 100)) / 100).toString() +'K';
    g('.canCollectGoldInMinute').innerHTML=(Math.round((Number(localStorage['afkFactor'])/60)* 100) / 100).toString() +'/m';
    g('.canCollectAPInMinute').innerHTML=(Math.round((Number(localStorage['afkFactor'])/60)* 100) / 100).toString() +'/m';
    
}
function collectAFK(){
    if(!g('.exactAmounts').checked){
        localStorage['myGold']=(Number(localStorage['myGold'])+currentCollected).toString();
        localStorage['myAP']=(Number(localStorage['myAP'])+currentCollected).toString();
    }else{
        localStorage['myGold']=(Number(localStorage['myGold'])+currentCollected).toString();
        localStorage['myAP']=(Number(localStorage['myAP'])+currentCollected).toString();
    }
    localStorage['seconds']='0'
    startTime = new Date();
    if(localStorage['seconds']){
      startTime.setSeconds(startTime.getSeconds() - parseInt(localStorage['seconds']));
    }
}
function changePage(pageName){
    for(var i=0;i<gA('.page').length;i++){
        gA('.page')[i].style.display='none';
    }
    g('.'+pageName+'Page').style.display='block';
}
start();
// localStorage.clear();
setInterval(update,500);
// OsZs2Fg9qZE